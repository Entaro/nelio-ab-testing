var nelioab_heatmap_session_id=nelioab_get_cookie_by_name("nelioab_userid")+"-"+new Date().getTime();function nelioab_hmdata(){this.data={};this.max=0}function nelioab_hmdata_for_elem(){this.data=[];this.max=0}nelioab_hmdata.prototype={addDataPoint:function(c,a,e){if(typeof a=="undefined"||a<0||typeof e=="undefined"||e<0){return}if(0===c){return}var b=this.data;var d=false;if(typeof b[c]!="undefined"){d=b[c]}if(!d){d=new nelioab_hmdata_for_elem();this.data[c]=d}d.addDataPoint(a,e);if(this.max<d.max){this.max=d.max}},exportDataSet:function(){var c=this.data;var b={};for(var a in this.data){b[a]=c[a].exportDataSet()}return{max:this.max,data:b,session:nelioab_heatmap_session_id}},};nelioab_hmdata_for_elem.prototype={addDataPoint:function(a,c){var b=this.data;if(!b[a]){b[a]=[]}if(!b[a][c]){b[a][c]=0}b[a][c]+=1;if(this.max<b[a][c]){this.max=b[a][c]}},exportDataSet:function(){var d=this.data;var b=[];for(var c in d){if(typeof c=="undefined"||!d.hasOwnProperty(c)){continue}for(var a in d[c]){if(typeof a=="undefined"||!d[c].hasOwnProperty(a)){continue}b.push({x:c,y:a,count:d[c][a]})}}return{max:this.max,data:b}},};function nelioab_selectDatastore(a){if(a<=360){return nelioab_phone_data}else{if(a<=768){return nelioab_tablet_data}else{if(a<=1024){return nelioab_desktop_data}else{return nelioab_hd_data}}}}function nelioab_selectClickDatastore(a){if(a<=360){return nelioab_phone_data_click}else{if(a<=768){return nelioab_tablet_data_click}else{if(a<=1024){return nelioab_desktop_data_click}else{return nelioab_hd_data_click}}}}var nelioab_actual_data;var nelioab_actual_data_click;var nelioab_phone_data=new nelioab_hmdata();var nelioab_tablet_data=new nelioab_hmdata();var nelioab_desktop_data=new nelioab_hmdata();var nelioab_hd_data=new nelioab_hmdata();var nelioab_phone_data_click=new nelioab_hmdata();var nelioab_tablet_data_click=new nelioab_hmdata();var nelioab_desktop_data_click=new nelioab_hmdata();var nelioab_hd_data_click=new nelioab_hmdata();function nelioabDoStartHeatmapTracking(i){nelioab_actual_data=nelioab_selectDatastore(jQuery(window).width());nelioab_actual_data_click=nelioab_selectClickDatastore(jQuery(window).width());var g=jQuery(document);var c=true,l=false,m=true,r=false,n=0,t=0,s=0,b=false,p=false,d=false,f=false;setInterval(function(){if(!p){c=true}},80);var j=setInterval(function(){if(r&&m&&!b&&!p&&!d){b=setInterval(function(){nelioab_actual_data.addDataPoint(n,t,s)},1000);f=setTimeout(function(){if(b&&!p){clearInterval(b);b=false;p=true}},10000)}},150);var k;if("HTML_HEATMAP_TRACKING"==i){n="html>body";k=function(x,v){if(typeof x.pageX=="undefined"||typeof x.pageY=="undefined"){return}var w=jQuery("body").width();var u=jQuery("body").height();var z=x.pageX;var y=Math.floor(x.pageY/40)*40+20;if(y>u){y=Math.floor((u-20)/40)*40+20}t=e(z,w);s=parseFloat(y/u).toFixed(5);if(v){nelioab_actual_data_click.addDataPoint(n,t,s)}nelioab_actual_data.addDataPoint(n,t,s)}}else{k=function(A,x){if(typeof A.pageX=="undefined"||typeof A.pageY=="undefined"){return}var B=jQuery(A.target);try{n=B.getFullPath()}catch(A){return}var z=B.css("padding-left");if(typeof z=="undefined"){z="0"}var w=B.css("padding-right");if(typeof w=="undefined"){w="0"}var E=B.css("padding-top");if(typeof E=="undefined"){E="0"}var C=B.css("padding-bottom");if(typeof C=="undefined"){C="0"}z=Math.round(z.replace(/[^0-9\.]/g,""));w=Math.round(w.replace(/[^0-9\.]/g,""));E=Math.round(E.replace(/[^0-9\.]/g,""));C=Math.round(C.replace(/[^0-9\.]/g,""));var y=B.width()+z+w;var D=B.height()+E+C;var v=A.pageX-B.offset().left-z;var u=A.pageY-B.offset().top-E;t=e(v,y);s=e(u,D);if(t==Infinity||t==NaN){t="0"}if(s==Infinity||s==NaN){s="0"}if(x){nelioab_actual_data_click.addDataPoint(n,t,s)}nelioab_actual_data.addDataPoint(n,t,s)}}var e=function(v,w){if(w<=50){return"0.5"}if(w<=500){var u=(v/w).toFixed(1);if(w<=150){if(u=="0.0"||u=="0.1"||u=="0.2"||u=="0.3"){return"0.2"}else{if(u=="0.4"||u=="0.5"||u=="0.6"){return"0.5"}else{return"0.8"}}}return u}var u=(v/w).toFixed(3);var x=parseInt(u.substring(3,4));if(w<=800){if(x<=5){x="5"}else{x=""}return u.substring(0,3)+x}else{if(w<=1500){if(x==0){x=""}else{if(x<=2){x="2"}else{if(x<=5){x="5"}else{if(x<=7){x="7"}else{x="9"}}}}return u.substring(0,3)+x}else{if(w<=5000){return u.replace(/0?.$/,"")}else{return u.replace(/0+$/,"")}}}};g.mousemove(function(u){if(d){return}r=true;if(b){clearInterval(b);b=false}if(f){clearTimeout(f);p=false}if(c&&m){k(u,false);c=false}});g.click(function(u){r=true;if(b){clearInterval(b);b=false}if(f){clearTimeout(f);p=false}if(!d){k(u,true)}});g.mouseleave(function(){r=false});g.mouseenter(function(){r=true});jQuery("body").bind("touchstart",function(w){d=true;var v=w.originalEvent.touches;for(var u=0;u<v.length;u++){k(v[u],true)}});jQuery(window).focus(function(){m=true});jQuery(window).blur(function(){m=false;if(b){clearInterval(b);b=false}if(f){clearTimeout(f);p=false}});jQuery(document).bind("byebye",function(v,u){if(u instanceof String&&u.indexOf("#")==0){return}k(v,true);a(true)});window.onunload=window.onbeforeunload=(function(){a(true)});var h=5000;function o(){setTimeout(function(){a(false)},h);if(h<=60000){h+=5000}}o();var q=false;function a(z){if(q){return}if(z){q=true}var B=nelioab_phone_data;nelioab_phone_data=new nelioab_hmdata();var u=nelioab_tablet_data;nelioab_tablet_data=new nelioab_hmdata();var x=nelioab_desktop_data;nelioab_desktop_data=new nelioab_hmdata();var w=nelioab_hd_data;nelioab_hd_data=new nelioab_hmdata();var C=nelioab_phone_data_click;nelioab_phone_data_click=new nelioab_hmdata();var A=nelioab_tablet_data_click;nelioab_tablet_data_click=new nelioab_hmdata();var v=nelioab_desktop_data_click;nelioab_desktop_data_click=new nelioab_hmdata();var y=nelioab_hd_data_click;nelioab_hd_data_click=new nelioab_hmdata();nelioab_actual_data=nelioab_selectDatastore(jQuery(window).width());nelioab_actual_data_click=nelioab_selectClickDatastore(jQuery(window).width());if(B.max+u.max+x.max+w.max+C.max+A.max+v.max+y.max>0){jQuery.ajax({type:"POST",async:false,url:NelioABHMTracker.ajaxurl,data:{action:"nelioab_send_heatmap_info",current_url:document.URL,"phone-data":JSON.stringify(B.exportDataSet()),"tablet-data":JSON.stringify(u.exportDataSet()),"desktop-data":JSON.stringify(x.exportDataSet()),"hd-data":JSON.stringify(w.exportDataSet()),"phone-data-click":JSON.stringify(C.exportDataSet()),"tablet-data-click":JSON.stringify(A.exportDataSet()),"desktop-data-click":JSON.stringify(v.exportDataSet()),"hd-data-click":JSON.stringify(y.exportDataSet()),"hm-post-id":NelioABHMTracker.post_id,},})}if(!z){o()}}jQuery(window).resize(function(u){nelioab_actual_data=nelioab_selectDatastore(jQuery(window).width());nelioab_actual_data_click=nelioab_selectClickDatastore(jQuery(window).width())})}function nelioabStartHeatmapTracking(){jQuery.ajax({type:"POST",async:true,url:NelioABHMTracker.ajaxurl,data:{action:"nelioab_track_heatmaps_for_post",post:NelioABHMTracker.post_id,},success:function(a){if("DONT_TRACK_HEATMAPS"==a){return}nelioabDoStartHeatmapTracking(a)}})};