var nelioab_heatmap_session_id=nelioab_get_cookie_by_name("nelioab_userid")+"-"+new Date().getTime();function nelioab_hmdata(){this.data={};this.max=0}function nelioab_hmdata_for_elem(){this.data=[];this.max=0}nelioab_hmdata.prototype={addDataPoint:function(c,a,e){if(a<0||a==undefined||e<0||e==undefined){return}var b=this.data;var d=false;if(b[c]!=undefined){d=b[c]}if(!d){d=new nelioab_hmdata_for_elem();this.data[c]=d}d.addDataPoint(a,e);if(this.max<d.max){this.max=d.max}},exportDataSet:function(){var c=this.data;var b={};for(var a in this.data){b[a]=c[a].exportDataSet()}return{max:this.max,data:b,session:nelioab_heatmap_session_id}},};nelioab_hmdata_for_elem.prototype={addDataPoint:function(a,c){var b=this.data;if(!b[a]){b[a]=[]}if(!b[a][c]){b[a][c]=0}b[a][c]+=1;if(this.max<b[a][c]){this.max=b[a][c]}},exportDataSet:function(){var d=this.data;var b=[];for(var c in d){if(c===undefined){continue}for(var a in d[c]){if(a===undefined){continue}b.push({x:c,y:a,count:d[c][a]})}}return{max:this.max,data:b}},};function nelioab_selectDatastore(a){if(a<=360){return nelioab_phone_data}else{if(a<=768){return nelioab_tablet_data}else{if(a<=1024){return nelioab_desktop_data}else{return nelioab_hd_data}}}}function nelioab_selectClickDatastore(a){if(a<=360){return nelioab_phone_data_click}else{if(a<=768){return nelioab_tablet_data_click}else{if(a<=1024){return nelioab_desktop_data_click}else{return nelioab_hd_data_click}}}}var nelioab_actual_data;var nelioab_actual_data_click;var nelioab_phone_data=new nelioab_hmdata();var nelioab_tablet_data=new nelioab_hmdata();var nelioab_desktop_data=new nelioab_hmdata();var nelioab_hd_data=new nelioab_hmdata();var nelioab_phone_data_click=new nelioab_hmdata();var nelioab_tablet_data_click=new nelioab_hmdata();var nelioab_desktop_data_click=new nelioab_hmdata();var nelioab_hd_data_click=new nelioab_hmdata();function nelioabStartHeatmapTracking(){nelioab_actual_data=nelioab_selectDatastore(jQuery(window).width());nelioab_actual_data_click=nelioab_selectClickDatastore(jQuery(window).width());var g=jQuery(document);var c=true,k=false,l=true,q=false,m=0,s=0,r=0,b=false,n=false,d=false,f=false;setInterval(function(){if(!n){c=true}},80);var i=setInterval(function(){if(q&&l&&!b&&!n&&!d){b=setInterval(function(){nelioab_actual_data.addDataPoint(m,s,r)},1000);f=setTimeout(function(){if(b&&!n){clearInterval(b);b=false;n=true}},10000)}},150);var j=function(z,w){if(z.pageX==undefined||z.pageY==undefined){return}var A=jQuery(z.target);try{m=A.getFullPath()}catch(z){return}var y=A.css("padding-left");if(y==undefined){y="0"}var v=A.css("padding-right");if(v==undefined){v="0"}var D=A.css("padding-top");if(D==undefined){D="0"}var B=A.css("padding-bottom");if(B==undefined){B="0"}y=Math.round(y.replace(/[^0-9\.]/g,""));v=Math.round(v.replace(/[^0-9\.]/g,""));D=Math.round(D.replace(/[^0-9\.]/g,""));B=Math.round(B.replace(/[^0-9\.]/g,""));var x=A.width()+y+v;var C=A.height()+D+B;var u=z.pageX-A.offset().left-y;var t=z.pageY-A.offset().top-D;s=e(u,x);r=e(t,C);if(s==Infinity||s==NaN){s="0"}if(r==Infinity||r==NaN){r="0"}if(w){nelioab_actual_data_click.addDataPoint(m,s,r)}nelioab_actual_data.addDataPoint(m,s,r)};var e=function(u,v){if(v<=50){return"0.5"}if(v<=500){var t=(u/v).toFixed(1);if(v<=150){if(t=="0.0"||t=="0.1"||t=="0.2"||t=="0.3"){return"0.2"}else{if(t=="0.4"||t=="0.5"||t=="0.6"){return"0.5"}else{return"0.8"}}}return t}var t=(u/v).toFixed(3);var w=parseInt(t.substring(3,4));if(v<=800){if(w<=5){w="5"}else{w=""}return t.substring(0,3)+w}else{if(v<=1500){if(w==0){w=""}else{if(w<=2){w="2"}else{if(w<=5){w="5"}else{if(w<=7){w="7"}else{w="9"}}}}return t.substring(0,3)+w}else{if(v<=5000){return t.replace(/0?.$/,"")}else{return t.replace(/0+$/,"")}}}};g.mousemove(function(t){if(d){return}q=true;if(b){clearInterval(b);b=false}if(f){clearTimeout(f);n=false}if(c&&l){j(t,false);c=false}});g.click(function(t){q=true;if(b){clearInterval(b);b=false}if(f){clearTimeout(f);n=false}if(!d){j(t,true)}});g.mouseleave(function(){q=false});g.mouseenter(function(){q=true});jQuery("body").bind("touchstart",function(v){d=true;var u=v.originalEvent.touches;for(var t=0;t<u.length;t++){j(u[t],true)}});jQuery(window).focus(function(){l=true});jQuery(window).blur(function(){l=false;if(b){clearInterval(b);b=false}if(f){clearTimeout(f);n=false}});jQuery(document).bind("byebye",function(u,t){if(t instanceof String&&t.indexOf("#")==0){return}j(u,true);a(true)});window.onunload=window.onbeforeunload=(function(){a(true)});var h=5000;function o(){setTimeout(function(){a(false)},h);if(h<=60000){h+=5000}}o();var p=false;function a(y){if(p){return}if(y){p=true}var A=nelioab_phone_data;nelioab_phone_data=new nelioab_hmdata();var t=nelioab_tablet_data;nelioab_tablet_data=new nelioab_hmdata();var w=nelioab_desktop_data;nelioab_desktop_data=new nelioab_hmdata();var v=nelioab_hd_data;nelioab_hd_data=new nelioab_hmdata();var B=nelioab_phone_data_click;nelioab_phone_data_click=new nelioab_hmdata();var z=nelioab_tablet_data_click;nelioab_tablet_data_click=new nelioab_hmdata();var u=nelioab_desktop_data_click;nelioab_desktop_data_click=new nelioab_hmdata();var x=nelioab_hd_data_click;nelioab_hd_data_click=new nelioab_hmdata();nelioab_actual_data=nelioab_selectDatastore(jQuery(window).width());nelioab_actual_data_click=nelioab_selectClickDatastore(jQuery(window).width());if(A.max+t.max+w.max+v.max+B.max+z.max+u.max+x.max>0){jQuery.ajax({type:"POST",async:false,url:NelioABHMTracker.ajaxurl,data:{action:"nelioab_send_heatmap_info",current_url:document.URL,"phone-data":JSON.stringify(A.exportDataSet()),"tablet-data":JSON.stringify(t.exportDataSet()),"desktop-data":JSON.stringify(w.exportDataSet()),"hd-data":JSON.stringify(v.exportDataSet()),"phone-data-click":JSON.stringify(B.exportDataSet()),"tablet-data-click":JSON.stringify(z.exportDataSet()),"desktop-data-click":JSON.stringify(u.exportDataSet()),"hd-data-click":JSON.stringify(x.exportDataSet()),"hm-post-id":NelioABHMTracker.post_id,},})}if(!y){o()}}jQuery(window).resize(function(t){nelioab_actual_data=nelioab_selectDatastore(jQuery(window).width());nelioab_actual_data_click=nelioab_selectClickDatastore(jQuery(window).width())})};