function nelioab_hmdata(){this.data={};this.max=0}function nelioab_hmdata_for_elem(){this.data=[];this.max=0}nelioab_hmdata.prototype={addDataPoint:function(c,a,e){if(a<0||a==undefined||e<0||e==undefined){return}var b=this.data;var d=false;if(b[c]!=undefined){d=b[c]}if(!d){d=new nelioab_hmdata_for_elem();this.data[c]=d}d.addDataPoint(a,e);if(this.max<d.max){this.max=d.max}},exportDataSet:function(){var c=this.data;var b={};for(var a in this.data){b[a]=c[a].exportDataSet()}return{max:this.max,data:b}},};nelioab_hmdata_for_elem.prototype={addDataPoint:function(a,c){var b=this.data;if(!b[a]){b[a]=[]}if(!b[a][c]){b[a][c]=0}b[a][c]+=1;if(this.max<b[a][c]){this.max=b[a][c]}},exportDataSet:function(){var d=this.data;var b=[];for(var c in d){if(c===undefined){continue}for(var a in d[c]){if(a===undefined){continue}b.push({x:c,y:a,count:d[c][a]})}}return{max:this.max,data:b}},};function nelioab_selectDatastore(a){if(a<=360){return nelioab_phone_data}else{if(a<=768){return nelioab_tablet_data}else{if(a<=1024){return nelioab_desktop_data}else{return nelioab_hd_data}}}}function nelioab_selectClickDatastore(a){if(a<=360){return nelioab_phone_data_click}else{if(a<=768){return nelioab_tablet_data_click}else{if(a<=1024){return nelioab_desktop_data_click}else{return nelioab_hd_data_click}}}}var nelioab_actual_data;var nelioab_actual_data_click;var nelioab_phone_data=new nelioab_hmdata();var nelioab_tablet_data=new nelioab_hmdata();var nelioab_desktop_data=new nelioab_hmdata();var nelioab_hd_data=new nelioab_hmdata();var nelioab_phone_data_click=new nelioab_hmdata();var nelioab_tablet_data_click=new nelioab_hmdata();var nelioab_desktop_data_click=new nelioab_hmdata();var nelioab_hd_data_click=new nelioab_hmdata();function nelioabStartHeatmapTracking(){nelioab_actual_data=nelioab_selectDatastore(jQuery(window).width());nelioab_actual_data_click=nelioab_selectClickDatastore(jQuery(window).width());var h=jQuery(document);var b=true,e=false,q=true,j=false,p=0,i=0,g=0,n=false,l=false,f=false,k=false;setInterval(function(){if(!l){b=true}},80);var d=setInterval(function(){if(j&&q&&!n&&!l&&!f){n=setInterval(function(){nelioab_actual_data.addDataPoint(p,i,g)},1000);k=setTimeout(function(){if(n&&!l){clearInterval(n);n=false;l=true}},10000)}},150);var o=function(x,u){if(x.pageX==undefined||x.pageY==undefined){return}var y=jQuery(x.target);p=y.getFullPath();var w=y.css("padding-left");if(w==undefined){w="0"}var t=y.css("padding-right");if(t==undefined){t="0"}var B=y.css("padding-top");if(B==undefined){B="0"}var z=y.css("padding-bottom");if(z==undefined){z="0"}w=Math.round(w.replace(/[^0-9\.]/g,""));t=Math.round(t.replace(/[^0-9\.]/g,""));B=Math.round(B.replace(/[^0-9\.]/g,""));z=Math.round(z.replace(/[^0-9\.]/g,""));var v=y.width()+w+t;var A=y.height()+B+z;var s=x.pageX-y.offset().left-w;var r=x.pageY-y.offset().top-B;i=a(s,v);g=a(r,A);if(i==Infinity||i==NaN){i="0"}if(g==Infinity||g==NaN){g="0"}if(u){nelioab_actual_data_click.addDataPoint(p,i,g)}nelioab_actual_data.addDataPoint(p,i,g)};var a=function(s,t){if(t<=50){return"0.5"}if(t<=500){var r=(s/t).toFixed(1);if(t<=150){if(r=="0.0"||r=="0.1"||r=="0.2"||r=="0.3"){return"0.2"}else{if(r=="0.4"||r=="0.5"||r=="0.6"){return"0.5"}else{return"0.8"}}}return r}var r=(s/t).toFixed(3);var u=parseInt(r.substring(3,4));if(t<=800){if(u<=5){u="5"}else{u=""}return r.substring(0,3)+u}else{if(t<=1500){if(u==0){u=""}else{if(u<=2){u="2"}else{if(u<=5){u="5"}else{if(u<=7){u="7"}else{u="9"}}}}return r.substring(0,3)+u}else{if(t<=5000){return r.replace(/0?.$/,"")}else{return r.replace(/0+$/,"")}}}};h.mousemove(function(r){if(f){return}j=true;if(n){clearInterval(n);n=false}if(k){clearTimeout(k);l=false}if(b&&q){o(r,false);b=false}});h.click(function(r){j=true;if(n){clearInterval(n);n=false}if(k){clearTimeout(k);l=false}if(!f){o(r,true)}});h.mouseleave(function(){j=false});h.mouseenter(function(){j=true});jQuery("body").bind("touchstart",function(t){f=true;var s=t.originalEvent.touches;for(var r=0;r<s.length;r++){o(s[r],true)}});jQuery(window).focus(function(){q=true});jQuery(window).blur(function(){q=false;if(n){clearInterval(n);n=false}if(k){clearTimeout(k);l=false}});jQuery(document).bind("byebye",function(s,r){if(r instanceof String&&r.indexOf("#")==0){return}o(s,true);m()});window.onunload=window.onbeforeunload=(function(){m()});var c=false;function m(){if(c){return}c=true;jQuery.ajax({type:"POST",async:false,url:window.location.href,data:{nelioab_send_heatmap_info:"true","phone-data":JSON.stringify(nelioab_phone_data.exportDataSet()),"tablet-data":JSON.stringify(nelioab_tablet_data.exportDataSet()),"desktop-data":JSON.stringify(nelioab_desktop_data.exportDataSet()),"hd-data":JSON.stringify(nelioab_hd_data.exportDataSet()),"phone-data-click":JSON.stringify(nelioab_phone_data_click.exportDataSet()),"tablet-data-click":JSON.stringify(nelioab_tablet_data_click.exportDataSet()),"desktop-data-click":JSON.stringify(nelioab_desktop_data_click.exportDataSet()),"hd-data-click":JSON.stringify(nelioab_hd_data_click.exportDataSet()),"hm-post-id":nelioab__hm_post_id,},})}jQuery(window).resize(function(r){nelioab_actual_data=nelioab_selectDatastore(jQuery(window).width());nelioab_actual_data_click=nelioab_selectClickDatastore(jQuery(window).width())})};